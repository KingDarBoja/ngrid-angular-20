@if (exampleStyle === 'toolbar') {
  <div fxLayout="column" class="mat-elevation-z3">
    <mat-toolbar color="primary">
      <span class="mat-h3" style="margin: 0" fxFlex="*">{{ exampleData?.title }}</span>
      <button mat-icon-button matTooltip="View Source" (click)="toggleViewSourceCode()">
        <mat-icon>code</mat-icon>
      </button>
    </mat-toolbar>
    <div fxLayout="column" class="section-code-and-component">
      @if (viewSourceCode) {
        <div>
          <ng-container *ngTemplateOutlet="sourceCodeTab"></ng-container>
        </div>
      }
      <div [class]="containerClass">
        <ng-template [cdkPortalOutlet]="selectedPortal" (attached)="attached($event)"></ng-template>
      </div>
    </div>
  </div>
}

@if (exampleStyle === 'flow') {
  <div class="flow-style-container">
    @if (viewSourceCode) {
      <div [@slideInOutRight]>
        <ng-container *ngTemplateOutlet="sourceCodeTab"></ng-container>
      </div>
    }
    @if (!viewSourceCode) {
      <div [@slideInOutLeft] class="flow-style-container">
        <ng-template [cdkPortalOutlet]="selectedPortal$ | async" (attached)="attached($event)"></ng-template>
        @if (selectedPortal$ | async | negate) {
          <mat-spinner></mat-spinner>
        }
      </div>
    }
    <div class="flow-style-code-marker" matTooltip="View Source" (click)="viewSourceCode = !viewSourceCode">
      <div class="flow-style-marker-thumb"></div>
      <mat-icon>code</mat-icon>
    </div>
  </div>
}

<ng-template #sourceCodeTab>
  @if (sourceCode | async; as assets) {
    <mat-tab-group>
      @for (asset of assets; track asset) {
        <mat-tab>
          <ng-template mat-tab-label>
            <div fxLayout="column" fxLayoutAlign="center center" [matTooltip]="asset.file">
              <span>{{asset.file}} [{{asset.lang.toUpperCase()}}]</span>
            </div>
          </ng-template>
          <div [exampleAssetFileView]="asset" class="pbl-code-example"></div>
        </mat-tab>
      }
    </mat-tab-group>
  } @else {
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  }
</ng-template>

