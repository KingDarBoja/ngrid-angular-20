<div class="pbl-content-toc-container" [class.pbl-content-toc-rtl]="dir === 'rtl'">
  @if (linksChanged | async; as links) {
    <div class="pbl-content-toc-inner">
      @if (tocArea.tocTitle) {
        <div class="pbl-content-toc-heading">{{ tocArea.tocTitle }}</div>
      }
      <ul class="pbl-content-toc-list">
        @for (l of links; track l; let i = $index) {
          <li
            class="pbl-content-toc-link pbl-content-toc-level-{{l.link.level}}"
            [class.active]="l === activeLink"
            [class.pbl-content-toc-rtl]="dir === 'rtl'">
            <ng-container *ngTemplateOutlet="linkTemplate || defaultLinkTemplate; context: { $implicit: { rootUrl: rootUrl, link: l.link } }"></ng-container>
          </li>
        }
      </ul>
    </div>
  }
</div>
<ng-template #defaultLinkTemplate let-ctx>
  <a [href]="'#' + ctx.rootUrl + '#' + ctx.link.id">{{ ctx.link.name }}</a>
</ng-template>
